"use strict";(self.webpackChunkezekiel_enns=self.webpackChunkezekiel_enns||[]).push([[73],{9626:function(e,t,n){n.d(t,{Zo:function(){return s},ah:function(){return i}});var r=n(4942),o=n(7294);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=o.createContext({});function i(e){var t=o.useContext(l);return o.useMemo((function(){return"function"==typeof e?e(t):c(c({},t),e)}),[t,e])}var u={};function s(e){var t=e.components,n=e.children,r=e.disableParentContext,a=i(t);return r&&(a=t||u),o.createElement(l.Provider,{value:a},n)}},1046:function(e,t,n){n.d(t,{w_:function(){return u}});var r=n(7294),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(o),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function i(e){return e&&e.map((function(e,t){return r.createElement(e.tag,c({key:t},e.attr),i(e.child))}))}function u(e){return function(t){return r.createElement(s,c({attr:c({},e.attr)},t),i(e.child))}}function s(e){var t=function(t){var n,o=e.attr,a=e.size,i=e.title,u=l(e,["attr","size","title"]),s=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:n,style:c(c({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==a?r.createElement(a.Consumer,null,(function(e){return t(e)})):t(o)}},1918:function(e,t,n){n.r(t),n.d(t,{TempBody:function(){return d},default:function(){return p}});var r=n(9626),o=n(7294);function a(e){var t=Object.assign({h2:"h2",p:"p",br:"br",strong:"strong",em:"em"},(0,r.ah)(),e.components),n=t.Section;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Section",!0),o.createElement(n,null,o.createElement(t.h2,null,"Overview"),o.createElement(t.p,null,"Recently I found a SQL injection in our code and after fixing that I noticed a concering pattern",o.createElement(t.br),"\n","in our backends db connections. There was no closing of the clients. After some quick math I made",o.createElement(t.br),"\n","a ticket outlining that after a small number of users our db would start refusing connections,",o.createElement(t.br),"\n","my math was actually really off and the number was even smaller. I actualyl broke the db while",o.createElement(t.br),"\n","testing a new endpoint. I explained to my manager that this was caused by the bug I metioned in",o.createElement(t.br),"\n","ticket. The stack was AWS and the team was pretty new to it which ment most bugs were chopped up to",o.createElement(t.br),"\n","being something wrong with our AWS configuration. So when I brought this bug to my manager he didnt\nput much thought into it and forced me to prove that it was the cause after we fixed it."),o.createElement(t.p,null,"Inorder to prove this was our bug I used ",o.createElement(t.strong,null,"JMeter")," to spin up a bunch of requests and sure enough",o.createElement(t.br),"\n","it only took 40 reuests within 5 minutes of eachother to break the backend."),o.createElement(t.p,null,"The fix is something Im pretty proud of. Most of our lamdbas made some call to the database so I",o.createElement(t.br),"\n","thought instead of going throught all 50 of our lambads and adding a close connection at the end",o.createElement(t.br),"\n","I could write a wrapper function to provide and manage the connection for the lambda.",o.createElement(t.br),"\n",o.createElement(t.em,null,"note a code review will be added here soon")),o.createElement(t.h2,null,"Outcome"),o.createElement(t.p,null,"in the end the bug was fixed and our backend was running even faster then normal, since our db",o.createElement(t.br),"\n","didn have a bunch of dangling connection"))}var c=function(e){void 0===e&&(e={});var t=Object.assign({},(0,r.ah)(),e.components).wrapper;return t?o.createElement(t,e,o.createElement(a,e)):a(e)};var l=n(1597),i=n(8263),u=n(5422),s=n(9499),m=n(3201),d=function(e){var t=e.id,n=void 0===t?"":t,r=e.children;return o.createElement("div",{className:i.kQ},o.createElement("div",{className:i.kt,id:n}," ",r," "))};function f(e){var t=e.children,n=(0,s.useLocation)().pathname;return console.log(n),o.createElement(o.Fragment,null,o.createElement("div",{id:"main"},o.createElement(r.Zo,{components:{Section:function(e){var t;return o.createElement("div",{className:i.kQ,id:null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""},o.createElement("div",{className:i.kt}," ",e.children," "))}}},t)),o.createElement("div",{className:[i.$n,u.fL,u.L5].join(" ")},o.createElement("span",{className:[u.W$,u.WP,"/"!=n?u.R3:""].join(" ")},o.createElement(l.Link,{to:"/"},"Home")),o.createElement("span",{className:[u.q0,u.Dy].join(" ")}),o.createElement("span",{className:[u.q0,u.C8].join(" ")},o.createElement("a",{href:"https://www.linkedin.com/in/ezekiel-enns/",target:"_blank"}," ",o.createElement(m.ltd,null)," "),o.createElement("a",{href:"https://github.com/EzekielEnns",target:"_blank"}," ",o.createElement(m.hJX,null)," "),o.createElement("a",{href:"mailto:  ezekiel.enns@pm.me",target:"_blank"}," ",o.createElement(m.KKr,null)," "))))}function p(e){return o.createElement(f,e,o.createElement(c,e))}},5422:function(e,t,n){n.d(t,{C8:function(){return s},Dy:function(){return l},L5:function(){return r},R3:function(){return a},W$:function(){return c},WP:function(){return o},fL:function(){return i},q0:function(){return u}});var r="powerline-module--dracula-background--1qp2N",o="powerline-module--dracula-cyan--IpdQh",a="powerline-module--dracula-green--E-KyR",c="powerline-module--front--K42XT",l="powerline-module--notCurrent--mF888",i="powerline-module--powerline--YYr+3",u="powerline-module--powerlineComponent--6HLq9",s="powerline-module--side--dO6OM"},8263:function(e,t,n){n.d(t,{$n:function(){return a},kQ:function(){return r},kt:function(){return o}});var r="template-module--content--t40Ig",o="template-module--mdx--9WIUv",a="template-module--nav--qhf0z"},4942:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})}}]);
//# sourceMappingURL=component---src-templates-template-tsx-content-file-path-home-ezekielenns-documents-work-portfolio-ezekiel-enns-content-say-so-conn-leak-mdx-afc218f04714c38fa23c.js.map